{% extends 'users/base.html' %}
{% load static %}
{% block content %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <div class="container">
            <div class="row g-0">
                <div class="col-sm-6 col-md-8" id="header-text">
                  <h1 id="header-h1">Multi-regulated <br> global broker. </h1>
                  <p id="header-paragraph">A trusted destination for traders worldwide, <br> Authorised by FCA, ASIC & FSCA</p>
                  <a class="btn" style="color: white; background-color: #fd5e14;"type="submit" id="body-link-row">Discover More</a>
                </div>

                <div class="col-6 col-md-4" id="header-image"><img src="images/in-liquid-slide-2.svg " alt=""></div>
              </div>
    </div>






    <button id="light-on" onclick="toggleLight('on')">Light On</button>
  <button id="light-off" onclick="toggleLight('off')">Light Off</button>
  <button id="pump-on" onclick="togglePump('on')">Pump On</button>
  <button id="pump-off" onclick="togglePump('off')">Pump Off</button>
  <button id="extension-on" onclick="toggleExtension('on')">Extension On</button>
  <button id="extension-off" onclick="toggleExtension('off')">Extension Off</button>
     <script>

function updateStatus(status) {
    var statusElement = document.getElementById("status");
  statusElement.innerHTML = "Статус: " + status;
  if (statusElement.innerHTML == "выключено") {
    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/get?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v0=" + 1, true);
    xhttp.send();
    button.innerHTML = "ON";
    button.style.backgroundColor = "green";
    updateStatus("включено");
  } else {
    button.innerHTML = "OFF";
    button.style.backgroundColor = "red";
    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/get?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v0=" + 0, true);
    xhttp.send();
    updateStatus("выключено");
  }
}



function light() {
  var button = document.getElementById("lightButton");
  var status = document.getElementById("status");

  if (button.innerHTML === "OFF") {
    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/update?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v0=" + 1, true);
    xhttp.send();
    button.innerHTML = "ON";
    button.style.backgroundColor = "green";
    updateStatus("включено");
  } else {
    button.innerHTML = "OFF";
    button.style.backgroundColor = "red";
    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/update?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v0=" + 0, true);
    xhttp.send();
    updateStatus("выключено");
  }

  // Fetch Blynk status text
  var apiUrl = "https://sgp1.blynk.cloud/external/api/get?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v0=";
  fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      // Extract status text from response
      const statusText = data[0].value;

      // Display status text to user
      status.innerHTML = `Статус: ${statusText}`;
    })
    .catch(error => {
      console.error(`Error fetching Blynk status: ${error}`);
    });
}



  function pump() {
    var button = document.getElementById("pumpButton");
    getStatus();
    if (button.innerHTML === "OFF") {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/update?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v1=" + 1, true);
        xhttp.send();
        button.innerHTML = "ON";
        button.style.backgroundColor = "green";
    } else {
        button.innerHTML = "OFF";
        button.style.backgroundColor = "red";
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/update?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v1=" + 0, true);
        xhttp.send();
    }
  }


  function socket() {
    var button = document.getElementById("socketButton");
    getStatus();
    if (button.innerHTML === "OFF") {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/update?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v2=" + 1, true);
        xhttp.send();
        button.innerHTML = "ON";
        button.style.backgroundColor = "green";
    } else {
        button.innerHTML = "OFF";
        button.style.backgroundColor = "red";
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://sgp1.blynk.cloud/external/api/update?token=CC80MXW2SnyzPnSphkaARhLebclpd6VH&v2=" + 0, true);
        xhttp.send();
    }
  }
  </script>
{% endblock content %}